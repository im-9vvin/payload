---
title: 인증 이메일
label: 이메일 인증
order: 30
desc: 이메일 인증을 통해 사용자는 계정이 완전히 활성화되기 전에 이메일 주소를 인증할 수 있습니다. 이메일 인증은 Payload가 제공하는 이메일 기능과 직접 연결됩니다.
keywords: 인증, 이메일, 구성, 설정, 문서, 콘텐츠 관리 시스템, cms, 헤드리스, javascript, node, react, nextjs
---

[인증](./overview)은 Payload가 제공하는 [이메일](../email/overview) 기능과 직접 연결됩니다. 이를 통해 인증, 비밀번호 재설정 등을 위해 사용자에게 이메일을 보낼 수 있습니다. Payload는 이러한 작업을 위한 기본 이메일 템플릿을 제공하지만, 브랜드에 맞게 커스터마이징할 수 있습니다.

## 이메일 인증

이메일 인증은 사용자가 인증할 수 있는 이메일 주소에 접근할 수 있음을 증명하도록 강제합니다. 이는 스팸 계정을 줄이고 사용자가 자신이 말하는 사람인지 확인하는 데 도움이 됩니다.

이메일 인증을 활성화하려면 [컬렉션 Config](../configuration/collections)에서 `auth.verify` 속성을 사용하세요:

```ts
import type { CollectionConfig } from 'payload'

export const Customers: CollectionConfig = {
  // ...
  auth: {
    verify: true, // highlight-line
  },
}
```

<Banner type="info">
  **팁:** 인증 이메일은 완전히 커스터마이징 가능합니다. [자세한
  내용](#generateemailhtml).
</Banner>

다음 옵션들을 사용할 수 있습니다:

| 옵션                        | 설명                                                                                                                                 |
| -------------------------- | ------------------------------------------------------------------------------------------------------------------------------------ |
| **`generateEmailHTML`**    | 계정 인증 방법을 알리는 사용자에게 보내지는 이메일 내의 HTML을 재정의할 수 있습니다. [자세한 내용](#generateemailhtml).                      |
| **`generateEmailSubject`** | 계정 인증 방법을 알리는 사용자에게 보내지는 이메일의 제목을 재정의할 수 있습니다. [자세한 내용](#generateemailsubject).                      |

#### generateEmailHTML

`{ req, token, user }`를 포함하는 하나의 인수를 받는 함수로, 계정 인증 방법을 알리는 사용자에게 보내지는 이메일 내의 HTML을 재정의할 수 있습니다. 이 함수는 HTML을 지원하는 문자열을 반환해야 하며, 선택적으로 전체 HTML 이메일이 될 수 있습니다.

```ts
import type { CollectionConfig } from 'payload'

export const Customers: CollectionConfig = {
  // ...
  auth: {
    verify: {
      // highlight-start
      generateEmailHTML: ({ req, token, user }) => {
        // 제공된 토큰을 사용하여 사용자가 계정을 인증할 수 있도록 허용
        const url = `https://yourfrontend.com/verify?token=${token}`

        return `안녕하세요 ${user.email}님, 여기를 클릭하여 이메일을 인증하세요: ${url}`
      },
      // highlight-end
    },
  },
}
```

<Banner type="warning">
  **중요:** 앱 프론트엔드의 페이지 등과 같이 이메일 인증을 위해 사용자를 보낼
  다른 URL을 지정하는 경우, 제공된 토큰을 사용하여 프론트엔드에서 Payload
  REST 또는 GraphQL 인증 작업 호출을 직접 처리해야 합니다. 위에서는 쿼리
  매개변수를 통해 전달되었습니다.
</Banner>

#### generateEmailSubject

위의 `generateEmailHTML`과 유사하게, 이메일 제목도 커스터마이징할 수 있습니다. 함수 인수는 동일하지만 HTML이 아닌 문자열만 반환할 수 있습니다.

```ts
import type { CollectionConfig } from 'payload'

export const Customers: CollectionConfig = {
  // ...
  auth: {
    verify: {
      // highlight-start
      generateEmailSubject: ({ req, user }) => {
        return `안녕하세요 ${user.email}님, 비밀번호를 재설정하세요!`
      },
      // highlight-end
    },
  },
}
```

## 비밀번호 찾기

`auth.forgotPassword` 속성의 다음 옵션으로 비밀번호 찾기 워크플로우의 작동 방식을 커스터마이징할 수 있습니다:

```ts
import type { CollectionConfig } from 'payload'

export const Customers: CollectionConfig = {
  // ...
  auth: {
    forgotPassword: {
      // highlight-line
      // ...
    },
  },
}
```

다음 옵션들을 사용할 수 있습니다:

| 옵션                        | 설명                                                                                                                        |
| -------------------------- | --------------------------------------------------------------------------------------------------------------------------- |
| **`expiration`**           | 비밀번호 재설정 토큰이 유효한 기간을 밀리초로 구성합니다.                                                                      |
| **`generateEmailHTML`**    | 비밀번호 재설정을 시도하는 사용자에게 보내지는 이메일 내의 HTML을 재정의할 수 있습니다. [자세한 내용](#generateEmailHTML).     |
| **`generateEmailSubject`** | 비밀번호 재설정을 시도하는 사용자에게 보내지는 이메일의 제목을 재정의할 수 있습니다. [자세한 내용](#generateEmailSubject).     |

#### generateEmailHTML

이 함수는 비밀번호 재설정을 시도하는 사용자에게 보내지는 이메일 내의 HTML을 재정의할 수 있게 해줍니다. 함수는 HTML을 지원하는 문자열을 반환해야 하며, 전체 HTML 이메일이 될 수 있습니다.

```ts
import type { CollectionConfig } from 'payload'

export const Customers: CollectionConfig = {
  // ...
  auth: {
    forgotPassword: {
      // highlight-start
      generateEmailHTML: ({ req, token, user }) => {
        // 제공된 토큰을 사용하여 사용자가 비밀번호를 재설정할 수 있도록 허용
        const resetPasswordURL = `https://yourfrontend.com/reset-password?token=${token}`

        return `
          <!doctype html>
          <html>
            <body>
              <h1>여기에 커스텀 이메일 템플릿이 있습니다!</h1>
              <p>안녕하세요, ${user.email}님!</p>
              <p>비밀번호를 재설정하려면 아래를 클릭하세요.</p>
              <p>
                <a href="${resetPasswordURL}">${resetPasswordURL}</a>
              </p>
            </body>
          </html>
        `
      },
      // highlight-end
    },
  },
}
```

<Banner type="warning">
  **중요:** 앱 프론트엔드의 페이지 등과 같이 비밀번호 재설정을 위해 사용자를
  보낼 다른 URL을 지정하는 경우, 제공된 토큰을 사용하여 프론트엔드에서
  Payload REST 또는 GraphQL 비밀번호 재설정 작업 호출을 직접 처리해야
  합니다. 위에서는 쿼리 매개변수를 통해 전달되었습니다.
</Banner>

<Banner type="success">
  **팁:** HTML 템플릿을 사용하여 커스텀 이메일 템플릿을 생성하고, CSS를
  자동으로 인라인화하는 등의 작업을 할 수 있습니다. Payload에서 전송되는
  모든 이메일을 표준화하는 재사용 가능한 함수를 만들 수 있어 커스텀 이메일
  전송을 더욱 DRY하게 만듭니다. Payload는 HTML 템플릿 엔진을 제공하지
  않으므로 자유롭게 선택할 수 있습니다.
</Banner>

다음 인수들이 `generateEmailHTML` 함수에 전달됩니다:

| 인수     | 설명                                    |
| -------- | --------------------------------------- |
| `req`    | 요청 객체.                              |
| `token`  | 사용자가 비밀번호를 재설정하기 위해 생성되는 토큰. |
| `user`   | 비밀번호 재설정을 시도하는 사용자 문서.     |

#### generateEmailSubject

위의 `generateEmailHTML`과 유사하게, 이메일 제목도 커스터마이징할 수 있습니다. 함수 인수는 동일하지만 HTML이 아닌 문자열만 반환할 수 있습니다.

```ts
import type { CollectionConfig } from 'payload'

export const Customers: CollectionConfig = {
  // ...
  auth: {
    forgotPassword: {
      // highlight-start
      generateEmailSubject: ({ req, user }) => {
        return `안녕하세요 ${user.email}님, 비밀번호를 재설정하세요!`
      },
      // highlight-end
    },
  },
}
```

다음 인수들이 `generateEmailSubject` 함수에 전달됩니다:

| 인수   | 설명                               |
| ------ | ---------------------------------- |
| `req`  | 요청 객체.                         |
| `user` | 비밀번호 재설정을 시도하는 사용자 문서. |