---
title: 토큰 데이터
label: 토큰 데이터
order: 70
desc: 요청 객체에서 읽기 위한 데이터 저장.
keywords: 인증, 구성, 설정, 문서, 콘텐츠 관리 시스템, cms, 헤드리스, javascript, node, react, nextjs
---

요청의 생명주기 동안 `req.user`에 접근하여 JWT에 저장하도록 구성한 데이터에 접근할 수 있습니다. 사용자 객체는 자동으로 요청에 추가됩니다.

### 토큰 데이터 정의

인증 컬렉션 내의 필드에 `saveToJWT` 속성을 설정하여 쿠키/JWT 토큰에 인코딩되는 데이터를 지정할 수 있습니다.

```ts
import type { CollectionConfig } from 'payload'

export const Users: CollectionConfig = {
  slug: 'users',
  auth: true,
  fields: [
    {
      // JWT에 저장됨
      saveToJWT: true,
      type: 'select',
      name: 'role',
      options: ['super-admin', 'user'],
    },
    {
      // 전체 객체가 JWT에 저장됨
      // 탭 필드도 같은 작업을 할 수 있습니다!
      saveToJWT: true,
      type: 'group',
      name: 'group1',
      fields: [
        {
          type: 'text',
          name: 'includeField',
        },
        {
          // JWT에서 생략됨
          saveToJWT: false,
          type: 'text',
          name: 'omitField',
        },
      ],
    },
    {
      type: 'group',
      name: 'group2',
      fields: [
        {
          // JWT에 저장되지만
          // 최상위 레벨에 저장됨
          saveToJWT: true,
          type: 'text',
          name: 'includeField',
        },
        {
          type: 'text',
          name: 'omitField',
        },
      ],
    },
  ],
}
```

<Banner type="success">
  **팁:**

필드 `name` 이외의 다른 키를 사용하려면 `saveToJWT`를 문자열로 정의할 수 있습니다.

</Banner>

### 토큰 데이터 사용

이는 사용자 정의 필드에 의존하는 [훅](../hooks/overview)과 [접근 제어](../access-control/overview)를 작성할 때 특히 유용합니다.

```ts
import type { CollectionConfig } from 'payload'

export const Invoices: CollectionConfig = {
  slug: 'invoices',
  access: {
    read: ({ req, data }) => {
      if (!req?.user) return false
      // highlight-start
      if ({ req.user?.role === 'super-admin'}) {
        return true
      }
      // highlight-end
      return data.owner === req.user.id
    }
  }
  fields: [
    {
      name: 'owner',
      relationTo: 'users'
    },
    // ... 기타 필드
  ],
}
```