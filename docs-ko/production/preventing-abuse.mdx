---
title: 프로덕션 API 남용 방지
label: 남용 방지
order: 20
desc: Payload는 로그인 시도 제한 및 IP 요청과 같은 프로덕션 API 남용을 방지하기 위해 구성할 수 있는 내장 보안을 제공합니다.
keywords: abuse, production, config, configuration, documentation, Content Management System, cms, headless, javascript, node, react, nextjs
---

## 소개

Payload는 애플리케이션별 요구 사항에 맞게 구성할 수 있는 내장 보안 모범 사례를 제공합니다.

## 실패한 로그인 시도 제한

사용자 계정이 일정 기간 동안 잠기기 전에 허용되는 최대 실패한 로그인 시도 횟수를 설정하세요. 인증 기능이 있는 컬렉션에서 `maxLoginAttempts`를 사용자가 들어갈 수 있는 합리적이지만 낮은 숫자로 설정하세요. `lockTime`을 사용하여 사용자가 마지막 허용된 시도에 실패한 시점부터 다시 시도할 수 있기까지 기다려야 하는 시간을 밀리초 단위로 설정하세요.

## 최대 깊이

`depth`를 통해 컬렉션을 쿼리하고 관련 문서를 자동으로 포함하는 것은 성능 비용이 발생합니다. 또한 구성에 순환 관계가 있을 수 있으며, 이는 서버가 타임아웃되고 크래시될 때까지 무한한 양의 관계가 앞뒤로 채워질 수 있는 시나리오를 의미합니다. Payload 구성에서 `maxDepth` 속성을 설정하여 깊이 관련 문제의 잠재적 가능성을 방지할 수 있습니다. 최대 허용 깊이는 개발 경험을 방해하지 않는 범위에서 가능한 한 작아야 하며, 기본값은 `10`입니다.

## 사이트 간 요청 위조 (CSRF)

CSRF 방지는 API에 대한 각 요청의 진위성을 확인하여 승인된 사용자로부터 다른 사이트의 악의적인 행동을 방지합니다. CSRF를 구성하는 방법은 [여기](/docs/authentication/cookies#csrf-attacks)를 참조하세요.

## 교차 출처 리소스 공유 (CORS)

헤드리스 작업을 안전하게 허용하려면 Payload API를 사용할 수 있도록 요청에 대해 허용된 출처를 구성해야 합니다. CORS 설정 방법 및 기타 Payload 구성 설정은 [여기](/docs/configuration/overview)에서 확인할 수 있습니다.

## GraphQL 복잡성 제한

GraphQL은 서버 제어 밖에서 쿼리 작성의 권한을 제공하기 때문에, 악의적인 의도를 가진 사람이 악의적으로 복잡한 쿼리를 작성하여 서버를 마비시킬 수 있습니다. 리소스 집약적인 GraphQL 요청을 방지하기 위해 Payload는 복잡성 제한을 지정하는 방법을 제공합니다. 이러한 제한은 각 요청에 대해 계산된 복잡성 점수를 기반으로 합니다.

너무 비싸다고 계산된 GraphQL 요청은 거부됩니다. Payload 구성의 `graphQL`에서 `maxComplexity` 값을 정수로 설정할 수 있습니다. 참고로, 각 추가된 필드의 기본 복잡성 값은 1이고, 모든 `relationship` 및 `upload` 필드에는 10의 값이 할당됩니다.

GraphQL이 필요하지 않다면 Payload 구성에서 `graphQL.disable: true`를 설정하여 완전히 비활성화하는 것이 좋습니다. GraphQL을 다시 활성화하고 싶다면 언제든지 이 속성을 제거하거나 `false`로 설정할 수 있습니다. 이를 끄면 Payload는 컬렉션에서 스키마 생성을 우회하고 라우트를 등록하지 않습니다.

## 악의적인 파일 업로드

Payload는 서버에서 업로드된 파일을 실행하지 않지만, 설정에 따라 잠재적으로 위험한 파일을 전송하고 저장하는 데 사용될 수 있습니다. 구성이 파일 업로드를 허용한다면 나쁜 행위자가 악의적인 파일을 업로드하여 다른 사용자에게 제공될 가능성이 있습니다. 위험을 완화하는 다음 방법들을 고려하세요.

먼저, 사용자가 새 계정을 등록할 수 있을 때 이메일 [인증](/docs/authentication/email#email-verification)을 활성화하고 다른 봇 방지 서비스를 추가하세요.

파일 업로드 컬렉션에서 `create` 및 `update` 액세스가 애플리케이션이 필요로 하는 만큼 제한적인지 검토하세요. 업로드된 사용자 파일의 `read` 액세스를 제한하고 사용자가 업로드한 파일이 Payload 외부에서 제공되는 것을 어떻게 제한할지 고려하세요.

또한 [hook](/docs/hooks/collections)에서 파일을 스캔하기 위해 [제3자 라이브러리](https://github.com/Cisco-Talos/clamav)를 추가하거나 안티바이러스 소프트웨어를 설치할 수도 있습니다.