---
title: DB 연결 없이 빌드하기
label: DB 연결 없이 빌드하기
order: 10
desc: Docker 컨테이너를 빌드할 때 DB 연결을 원하지 않으시나요? 이를 방지하는 방법을 알아보세요!
keywords: deployment, production, config, configuration, documentation, Content Management System, cms, headless, javascript, node, react, nextjs
---

프로덕션용 사이트를 빌드할 때, 특히 Docker를 사용할 때 가장 일반적인 문제 중 하나는 DB 연결 요구 사항입니다.

중요한 점은 Payload 자체는 이러한 요구 사항이 없다는 것입니다. 하지만 라우트 세그먼트 중 일부가 SSG를 활성화하고(이는 기본값입니다. 옵트아웃하거나 [Dynamic API](https://nextjs.org/docs/app/deep-dive/caching#dynamic-apis)를 사용하지 않은 경우) Payload Local API를 사용하는 경우 [Next.js의 SSG](https://nextjs.org/docs/pages/building-your-application/rendering/static-site-generation)가 필요합니다.

해결 방법:

## experimental-build-mode Next.js 빌드 플래그 사용

`pnpm next build --experimental-build-mode compile` 명령을 사용하여 정적 생성 없이 코드만 컴파일하는 Next.js 빌드를 실행할 수 있습니다. 이는 DB 연결이 필요하지 않습니다. 이 경우 페이지가 동적으로 렌더링되지만, 그 후 DB 연결이 있을 때 `pnpm next build --experimental-build-mode generate` 명령을 사용하여 정적 페이지를 생성할 수 있습니다.

`pnpm next build --experimental-build-mode compile`을 실행할 때, `NEXT_PUBLIC`으로 접두사가 붙은 환경 변수는 인라인화되지 않고 클라이언트에서 `undefined`가 됩니다. 이러한 변수를 사용할 수 있게 하려면, DB 연결이 가능한 경우 `pnpm next build --experimental-build-mode generate`를 실행하거나, DB 연결이 없는 경우 `pnpm next build --experimental-build-mode generate-env`를 사용하세요.

[Next.js 문서](https://nextjs.org/docs/pages/api-reference/cli/next#next-build-options)

## SSG 옵트아웃

모든 라우트 세그먼트 파일에 다음을 추가하여 SSG를 옵트아웃할 수 있습니다:

```ts
export const dynamic = 'force-dynamic'
```

**정적 최적화가 비활성화되어 사이트가 느려집니다**.
[Next.js 문서](https://nextjs.org/docs/app/deep-dive/caching#opting-out-2)에서 자세히 알아보세요.