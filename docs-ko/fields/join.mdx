---
title: 조인 필드
label: 조인
order: 140
desc: 조인 필드는 관련 문서로 작업할 수 있는 기능을 제공합니다. 조인 필드 사용법, 예제 및 옵션을 알아보세요.
keywords: 조인, 관계, 연결, 필드, 구성, 설정, 문서, 콘텐츠 관리 시스템, cms, 헤드리스, javascript, node, react, nextjs
---

조인 필드는 관계 및 업로드 필드를 반대 방향으로 사용할 수 있게 해줍니다. 조인을 사용하면 특정 컬렉션 문서에 대한 참조를 가진 컬렉션을 편집하고 볼 수 있습니다. 필드 자체는 가상 필드 역할을 하며, 조인 필드가 있는 컬렉션에는 새로운 데이터가 저장되지 않습니다. 대신 관리자 UI가 더 나은 편집 경험을 위해 관련 문서를 표시하고 Payload의 API를 통해 표면화됩니다.

조인 필드는 다음과 같은 시나리오에서 유용합니다:

- 주어진 `Product`에 대한 `Orders` 표시
- `Category`에 속한 `Posts` 보기 및 편집
- 양방향 관계 데이터와 작업
- 문서나 업로드가 다른 문서에서 어디에 사용되는지 표시

<LightDarkImage
  srcLight="https://payloadcms.com/images/docs/fields/join.png"
  srcDark="https://payloadcms.com/images/docs/fields/join-dark.png"
  alt="Payload 관리자 패널의 조인 필드를 보여줍니다"
  caption="조인 필드의 관리자 패널 스크린샷"
/>

조인 필드가 작동하려면 조인하고 있는 컬렉션에 기존 [관계](./relationship) 또는 [업로드](./upload) 필드가 있어야 합니다. 이는 관련 문서의 필드의 컬렉션과 경로를 참조합니다.
관계 필드를 추가하려면 [필드 Config](./overview)에서 `type`을 `join`으로 설정하세요:

```ts
import type { Field } from 'payload'

export const MyJoinField: Field = {
  // highlight-start
  name: 'relatedPosts',
  type: 'join',
  collection: 'posts',
  on: 'category',
  // highlight-end
}

// 다른 컬렉션의 관계 필드:
export const MyRelationshipField: Field = {
  name: 'category',
  type: 'relationship',
  relationTo: 'categories',
}
```

이 예제에서 필드는 `category` 컬렉션에 추가될 때 관련 `posts`를 표시하도록 정의됩니다. `on` 속성은 컬렉션 문서와 관련된 필드의 관계 필드 이름을 지정하는 데 사용됩니다.

이 예제를 통해 관리자 UI나 API 응답에서 카테고리로 이동하면 카테고리와 관련된 게시글이 자동으로 채워져 표시되는 것을 볼 수 있습니다. 이는 매우 강력하며 다양한 관계 유형을 쉬운 방식으로 정의하는 데 사용할 수 있습니다.

<Banner type="success">
  조인 필드는 매우 성능이 뛰어나며 깊이 1 이상을 추가할 때까지 API 응답에
  추가 쿼리 오버헤드를 추가하지 않습니다. 모든 데이터베이스 어댑터에서
  작동합니다. MongoDB에서는 **집계**를 사용하여 관련 문서를 자동으로
  조인하고, 관계형 데이터베이스에서는 조인을 사용합니다.
</Banner>

<Banner type="warning">
  조인 필드는 [DocumentDB](https://aws.amazon.com/documentdb/)와
  [Azure Cosmos DB](https://azure.microsoft.com/en-us/products/cosmos-db/)에서는
  지원되지 않습니다. 해당 필드에 대한 데이터를 쿼리하기 위해 내부적으로 MongoDB
  집계를 사용하는데, 이는 해당 플랫폼에서 제한되기 때문입니다. 이는 향후
  변경될 수 있습니다.
</Banner>

### 스키마 조언

데이터베이스를 모델링할 때 양방향 관계를 구성하고 싶은 많은 곳을 만날 수 있습니다. 하지만 중요한 고려 사항이 있습니다. 일반적으로 주어진 관계에 대한 정보를 _한_ 곳에만 저장하고 싶을 것입니다.

게시글과 카테고리 예제를 살펴보겠습니다. 게시글을 편집하는 동안 게시글이 속한 카테고리를 정의하는 것이 합리적입니다.

일반적으로 카테고리에도 게시글 ID 목록을 직접 저장할 필요는 없을 것입니다. 몇 가지 이유가 있습니다:

- 관계에 대한 "단일 진실 소스"를 갖고 두 소스를 서로 동기화하는 것에 대해 걱정하지 않고 싶습니다
- 수백, 수천 또는 수백만 개의 게시글이 있는 경우 해당 카테고리에 모든 게시글 ID를 저장하고 싶지 않을 것입니다
- 기타

이것이 `join` 필드가 특히 강력한 이유입니다. 이를 통해 `post`에 `category_id`만 저장하면 되고, 카테고리를 쿼리할 때 Payload가 자동으로 관련 게시글을 조인해 줍니다. 관련 카테고리는 게시글 자체에만 저장되며 양쪽에 복제되지 않습니다. 하지만 `join` 필드가 양방향 API와 UI를 가능하게 해줍니다.

### 조인 필드를 사용하여 데이터베이스 스키마를 완전히 제어하기

일반적인 다형성/다중 관계의 경우 Postgres나 SQLite를 사용하는 경우 Payload는 자동으로 `posts_rels` 테이블을 생성하여 주어진 문서의 모든 관계를 저장하는 연결 테이블 역할을 합니다.

하지만 데이터베이스 아키텍처를 더 많이 제어하고 싶다면 이것이 적절하지 않을 수 있습니다. `_rels` 테이블을 갖고 싶지 않고 자체 연결 테이블 디자인을 유지/제어하고 싶을 수 있습니다.

<Banner type="success">
  조인 필드를 사용하면 자체 연결 테이블 디자인을 제어하고 Payload의
  자동 _rels 테이블 생성을 피할 수 있습니다.
</Banner>

`join` 필드는 _모든_ 컬렉션과 함께 사용할 수 있으며, `categories_posts`라고 하는 자체 "연결" 컬렉션을 정의하고 싶다면 `post_id`와 `category_id` 열을 가진 연결 테이블의 모양을 완전히 제어할 수 있습니다.

한 걸음 더 나아가 `categories_posts` 컬렉션의 `admin.hidden` 속성을 활용하여 컬렉션이 관리자 UI 내비게이션에 나타나지 않도록 숨길 수 있습니다.

#### 관계에 추가 필드 지정

`join` 필드의 또 다른 매우 강력한 사용 사례는 관계에 "컨텍스트" 필드를 정의할 수 있다는 것입니다. 게시글과 카테고리가 있고 `categories_posts`라는 새로운 의사 연결 컬렉션에서 관련 문서를 조인하기 위해 게시글과 카테고리 컬렉션 모두에서 조인 필드를 사용한다고 가정해 보겠습니다. 이제 관계가 이 세 번째 연결 컬렉션에 저장되고 게시글과 카테고리 모두에서 표면화될 수 있습니다. 하지만 중요한 것은 이 공유 연결 컬렉션에 추가 "컨텍스트" 필드를 추가할 수 있다는 것입니다.

예를 들어, 이 `categories_posts` 컬렉션에서 `category`와 `post` 필드를 갖는 것 외에도 `featured`나 `spotlight`와 같은 커스텀 "컨텍스트" 필드를 추가할 수 있으며, 이를 통해 관계에 직접 추가 정보를 저장할 수 있습니다.
`join` 필드는 강력한 관리자 UI로 래핑된 Payload의 모든 유형의 관계형 아키텍처에 대한 완전한 제어권을 제공합니다.

## 구성 옵션

| 옵션                   | 설명                                                                                                                                                                   |
| ---------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **`name`** \*          | 데이터베이스에서 검색될 때 속성 이름으로 사용됩니다. [자세한 내용](./overview#field-names).                                                                            |
| **`collection`** \*    | 관계 필드를 가진 `slug`들 또는 컬렉션 슬러그의 배열.                                                                                                                   |
| **`on`** \*            | 컬렉션 문서와 관련된 관계 또는 업로드 필드의 이름. 중첩 경로에는 점 표기법을 사용합니다. 예: 'myGroup.relationName'. `collection`이 배열인 경우 이 필드는 지정된 모든 컬렉션에 존재해야 합니다 |
| **`orderable`**        | true인 경우 커스텀 정렬을 활성화하고 조인된 문서를 드래그 앤 드롭으로 재정렬할 수 있습니다. 효율적인 재정렬을 위해 [분수 인덱싱](https://observablehq.com/@dgreensp/implementing-fractional-indexing)을 사용합니다. |
| **`where`**            | 관련 문서가 나타나지 않도록 숨기는 `Where` 쿼리. 요청에서 지정된 `where`와 병합됩니다.                                                                                |
| **`maxDepth`**         | 기본값은 1이며, 이 필드에 대한 최대 채우기 깊이를 설정합니다. 이 필드에 도달했을 때 남은 깊이에 관계없이 적용됩니다. [최대 깊이](../queries/depth#max-depth).        |
| **`label`**            | 관리자 패널에서 필드 레이블로 사용되는 텍스트 또는 각 언어의 키가 있는 객체.                                                                                          |
| **`hooks`**            | 이 필드에 대한 로직을 제어하기 위해 필드 훅을 제공합니다. [자세한 내용](../hooks/fields).                                                                              |
| **`access`**           | 사용자가 이 필드의 데이터로 무엇을 보고 할 수 있는지 나타내는 필드 액세스 제어를 제공합니다. [자세한 내용](../access-control/fields).                                |
| **`defaultLimit`**     | 반환할 문서 수. 모든 관련 문서를 반환하려면 0으로 설정합니다.                                                                                                          |
| **`defaultSort`**      | 조인된 문서가 반환되는 순서를 지정하는 데 사용되는 필드 이름.                                                                                                          |
| **`admin`**            | 관리자 특정 구성. [자세한 내용](#admin-config-options).                                                                                                                |
| **`custom`**           | 커스텀 데이터 추가를 위한 확장 지점 (예: 플러그인용).                                                                                                                  |
| **`typescriptSchema`** | JSON 스키마 제공으로 필드 유형 생성을 재정의.                                                                                                                          |
| **`graphQL`**          | 필드에 대한 커스텀 graphQL 구성. [자세한 내용](/docs/graphql/overview#field-complexity)                                                                               |

_\* 별표는 필수 속성을 나타냅니다._

## 관리자 구성 옵션

`admin` 구성 속성을 사용하여 조인 필드의 사용자 경험을 제어할 수 있습니다. 다음 옵션들이 지원됩니다:

| 옵션                   | 설명                                                                                                 |
| ---------------------- | ---------------------------------------------------------------------------------------------------- |
| **`defaultColumns`**   | 관계 테이블에서 표시할 열에 해당하는 필드 이름 배열. 기본값은 컬렉션 구성입니다.                     |
| **`allowCreate`**      | 이 필드에서 새로운 관련 문서를 만드는 컨트롤을 제거하려면 `false`로 설정합니다.                      |
| **`components.Label`** | 필드 컴포넌트의 기본 레이블을 재정의합니다. [자세한 내용](./overview#label)                          |

## 조인 필드 데이터

조인 필드가 관련 문서로 채워진 문서가 반환될 때. 반환되는 구조는 다음을 포함하는 객체입니다:

- `docs` 관련 문서의 배열 또는 깊이에 도달한 경우 ID만
- `hasNextPage` 추가 문서가 있는지 나타내는 불린 값
- `totalDocs` 문서의 총 수, 조인 쿼리에 `count: true`가 전달된 경우에만 존재

```json
{
  "id": "66e3431a3f23e684075aae9c",
  "relatedPosts": {
    "docs": [
      {
        "id": "66e3431a3f23e684075aaeb9",
        // 기타 필드...
        "category": "66e3431a3f23e684075aae9c"
      }
      // { ... }
    ],
    "hasNextPage": false,
    "totalDocs": 10 // count: true가 전달된 경우
  }
  // 기타 필드...
}
```

## 조인 필드 데이터 (다형성)

다형성 조인 필드(`collection`이 배열인 경우)가 관련 문서로 채워진 문서가 반환될 때. 반환되는 구조는 다음을 포함하는 객체입니다:

- `docs` `relationTo` - 문서의 컬렉션 슬러그와 `value` - 문서 자체 또는 깊이에 도달한 경우 ID의 배열
- `hasNextPage` 추가 문서가 있는지 나타내는 불린 값
- `totalDocs` 문서의 총 수, 조인 쿼리에 `count: true`가 전달된 경우에만 존재

```json
{
  "id": "66e3431a3f23e684075aae9c",
  "relatedPosts": {
    "docs": [
      {
        "relationTo": "posts",
        "value": {
          "id": "66e3431a3f23e684075aaeb9",
          // 기타 필드...
          "category": "66e3431a3f23e684075aae9c"
        }
      }
      // { ... }
    ],
    "hasNextPage": false,
    "totalDocs": 10 // count: true가 전달된 경우
  }
  // 기타 필드...
}
```

## 쿼리 옵션

조인 필드는 반환될 관련 문서를 필터링, 정렬 및 제한하는 커스텀 쿼리를 지원합니다. 각 조인 필드에 대한 특정 쿼리 옵션 외에도 `joins: false`를 전달하여 모든 조인 필드가 반환되지 않도록 비활성화할 수 있습니다. 이는 관련 문서가 필요하지 않을 때 성능상의 이유로 유용합니다.

다음 쿼리 옵션들이 지원됩니다:

| 속성        | 설명                                                                           |
| ----------- | ------------------------------------------------------------------------------ |
| **`limit`** | 반환될 최대 관련 문서 수, 기본값은 10입니다.                                   |
| **`where`** | 조인된 문서를 필터링하는 선택적 `Where` 쿼리. 필드 `where` 객체와 병합됩니다.  |
| **`sort`**  | 관련 결과를 정렬하는 데 사용되는 문자열                                        |
| **`count`** | 관련 문서의 수를 포함할지 여부. 기본적으로 포함되지 않습니다                   |

이것들은 Local API, GraphQL, REST API에 적용될 수 있습니다.

### Local API

Local API에 `joins`을 추가하면 필드의 `name`으로 각 조인 필드에 대한 요청을 커스터마이징할 수 있습니다.

```js
const result = await payload.find({
  collection: 'categories',
  where: {
    title: {
      equals: 'My Category',
    },
  },
  joins: {
    relatedPosts: {
      limit: 5,
      where: {
        title: {
          equals: 'My Post',
        },
      },
      sort: 'title',
    },
  },
})
```

<Banner type="warning">
  현재 `collection` 배열을 가진 조인 필드의 조인된 문서에 대한 `Where` 쿼리
  지원은 제한적이며 배열과 블록 내부의 필드에는 지원되지 않습니다.
</Banner>

### Rest API

REST API는 Local API와 동일한 쿼리 옵션을 지원합니다. `joins` 쿼리 매개변수를 사용하여 필드의 `name`으로 각 조인 필드에 대한 요청을 커스터마이징할 수 있습니다. 예를 들어, 관련 게시글을 5개로 제한하고 제목으로 정렬하는 문서를 가져오는 API 호출:

`/api/categories/${id}?joins[relatedPosts][limit]=5&joins[relatedPosts][sort]=title`

단일 요청에 대해 동일하거나 다른 조인 필드에 대해 필요한 만큼 `joins` 매개변수를 지정할 수 있습니다.

### GraphQL

GraphQL API는 로컬 및 REST API와 동일한 쿼리 옵션을 지원합니다. 쿼리에서 각 조인 필드에 대한 쿼리 옵션을 지정할 수 있습니다.

예제:

```graphql
query {
  Categories {
    docs {
      relatedPosts(
        sort: "createdAt"
        limit: 5
        where: { author: { equals: "66e3431a3f23e684075aaeb9" } }
        """
        totalDocs를 검색하려면 선택적으로 count: true를 전달하세요
        """
        count: true
      ) {
        docs {
          title
        }
        hasNextPage
        totalDocs
      }
    }
  }
}
```