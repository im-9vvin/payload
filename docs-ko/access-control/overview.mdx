---
title: 접근 제어
label: 개요
order: 10
desc: Payload는 접근 제어를 간단하게 정의하고 관리할 수 있게 합니다. 역할을 선언하여 권한을 설정하고 사용자가 상호 작용할 수 있는 것을 제한할 수 있습니다.
keywords: 개요, 접근 제어, 권한, 문서, 콘텐츠 관리 시스템, cms, 헤드리스, javascript, node, react, nextjs
---

<YouTube id="DoPLyXG26Dg" title="Payload 접근 제어 개요" />

접근 제어는 사용자가 주어진 문서에 대해 할 수 있는 것과 할 수 없는 것, 그리고 [관리자 패널](../admin/overview) 내에서 볼 수 있는 것과 볼 수 없는 것을 결정합니다. 접근 제어를 구현함으로써 사용자, 그들의 역할(RBAC), 문서 데이터 또는 애플리케이션이 요구하는 기타 기준에 따라 세분화된 제한을 정의할 수 있습니다.

접근 제어 함수는 _작업_에 범위가 지정되어 있으며, 이는 `create`, `read`, `update`, `delete` 등에 대해 서로 다른 규칙을 가질 수 있음을 의미합니다. 접근 제어 함수는 변경사항이 만들어지기 _전에_ 그리고 작업이 완료되기 _전에_ 실행됩니다. 이를 통해 요청을 이행하기 전에 사용자가 필요한 권한을 가지고 있는지 확인할 수 있습니다.

접근 제어에는 다음과 같은 많은 사용 사례가 있습니다:

- 모든 게시물에 대한 `read` 접근을 모든 사람에게 허용
- `status` 필드가 `published`와 같은 게시물에만 공개 접근 허용
- `role` 필드가 `admin`과 같은 사용자에게만 게시물 삭제 권한 부여
- 누구나 연락처 양식을 제출할 수 있지만 로그인한 사용자만 `read`, `update` 또는 `delete` 가능
- 사용자가 자신의 주문만 볼 수 있고 다른 사람의 주문은 볼 수 없도록 제한
- 특정 조직에 속한 사용자가 해당 조직의 리소스에만 액세스할 수 있도록 허용

Payload에는 세 가지 주요 유형의 접근 제어가 있습니다:

- [컬렉션 접근 제어](./collections)
- [글로벌 접근 제어](./globals)
- [필드 접근 제어](./fields)

## 기본 접근 제어

Payload는 추가 구성 없이도 데이터가 [인증](../authentication/overview) 뒤에서 보호되도록 기본 접근 제어를 제공합니다. 이를 위해 Payload는 단순히 요청에 사용자가 있는지 확인하는 기본 함수를 설정합니다. 필요에 따라 자체 접근 제어 함수를 정의하여 이 기본 동작을 재정의할 수 있습니다.

다음은 Payload가 제공하는 기본 접근 제어입니다:

```ts
const defaultPayloadAccess = ({ req: { user } }) => {
  // 사용자가 발견되면 `true`를 반환하고
  // undefined 또는 null이면 `false`를 반환합니다
  return Boolean(user) // highlight-line
}
```

<Banner type="warning">
  **중요:** [Local API](../local-api/overview)에서는 모든 접근 제어가
  기본적으로 _건너뛰어집니다_. 이를 통해 서버가 애플리케이션을 완전히 제어할
  수 있습니다. 다시 적용하려면 요청에서 `overrideAccess` 옵션을 `false`로
  설정할 수 있습니다.
</Banner>

## Access 작업

관리자 패널은 접근 제어 변경사항에 동적으로 응답합니다. 예를 들어, `ExampleCollection` 편집을 "admin" 역할을 가진 사용자로만 제한하면 Payload는 해당 컬렉션을 관리자 패널에서 완전히 **숨깁니다**. 이는 매우 강력하며 API를 보호하는 것과 동일한 함수를 사용하여 관리자 패널 내에서 누가 무엇을 할 수 있는지 제어할 수 있게 해줍니다.

이를 달성하기 위해 Payload는 [Access 작업](../authentication/operations#access)을 노출합니다. 로그인 시 Payload는 모든 컬렉션, 글로벌 및 필드에 걸쳐 최상위 수준에서 각 접근 제어 함수를 실행하고 현재 인증된 사용자가 애플리케이션 내에서 할 수 있는 작업의 반영을 포함하는 응답을 반환합니다.

<Banner type="warning">
  **중요:** [Access
  작업](../authentication/operations#access)을 통해 접근 제어 함수가
  실행될 때 `id`와 `data` 인수는 `undefined`가 됩니다. 이는 Payload가 특정
  문서를 참조하지 않고 함수를 실행하기 때문입니다.
</Banner>

접근 제어 함수 내에서 `id` 또는 `data`를 사용하는 경우 먼저 정의되었는지 확인하세요. 정의되지 않은 경우 접근 제어가 Access 작업을 통해 실행되어 사용자가 관리자 패널 내에서 할 수 있는 작업만 확인하고 있다고 가정할 수 있습니다.

## 로케일별 접근 제어

로케일별 접근 제어를 구현하려면 접근 제어 함수에서 `req.locale` 인수를 사용할 수 있습니다. 이 인수를 사용하면 요청의 현재 로케일을 평가하고 그에 따라 액세스 권한을 결정할 수 있습니다.

다음은 예제입니다:

```ts
const access = ({ req }) => {
  // 로케일이 'en'인 경우 액세스 허용
  if (req.locale === 'en') {
    return true
  }

  // 다른 모든 로케일에 대해 액세스 거부
  return false
}
```