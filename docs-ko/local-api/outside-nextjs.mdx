---
title: Next.js 외부에서 Payload 사용하기
label: Next.js 외부
order: 20
desc: Payload는 독립 실행형 스크립트나 Remix, SvelteKit, Nuxt와 같은 다른 프레임워크에서 Next.js 외부에서도 사용할 수 있습니다.
keywords: local api, config, configuration, documentation, Content Management System, cms, headless, javascript, node, react, express
---

Payload는 Next.js 외부에서 완전히 사용할 수 있으며, 이는 스크립트 실행, 별도의 백엔드 서비스에서 Payload 사용, 또는 SvelteKit, Remix, Nuxt와 같은 다른 프론트엔드 프레임워크에서 데이터베이스에서 직접 데이터를 가져오기 위해 Payload의 로컬 API를 사용하는 경우에 유용합니다.

<Banner>
  **참고:** Payload와 모든 공식 패키지는 완전한 ESM입니다. 자체 프로젝트에서
  Payload를 사용하려면, 스크립트를 ESM 형식으로 작성하거나 Payload 구성을
  동적으로 가져오는지 확인하세요.
</Banner>

## Next.js 외부에서 Payload 구성 가져오기

Payload는 데이터베이스 시드나 일회성 작업 수행과 같은 작업에 유용할 수 있는 독립 실행형 스크립트를 실행하는 편리한 방법을 제공합니다.

독립 실행형 스크립트에서는 Payload 구성을 간단히 가져와서 바로 사용할 수 있습니다. 초기화된 Payload 사본이 필요한 경우, `getPayload` 함수를 사용할 수 있습니다. 이는 데이터베이스 시드나 다른 일회성 작업 수행과 같은 작업에 유용할 수 있습니다.

```ts
import { getPayload } from 'payload'
import config from '@payload-config'

const seed = async () => {
  // 구성을 전달하여 Payload의 로컬 사본 가져오기
  const payload = await getPayload({ config })

  const user = await payload.create({
    collection: 'users',
    data: {
      email: 'dev@payloadcms.com',
      password: 'some-password',
    },
  })

  const page = await payload.create({
    collection: 'pages',
    data: {
      title: 'My Homepage',
      // 시드할 다른 데이터
    },
  })
}

// 시드 스크립트를 실행하기 위해 여기에서 함수 호출
await seed()
```

그런 다음 `payload run`을 사용하여 스크립트를 실행할 수 있습니다. 예: 이 독립 실행형 스크립트를 `src/seed.ts`에 배치했다면, 다음과 같이 실행할 것입니다:

```sh
payload run src/seed.ts
```

`payload run` 명령은 두 가지 작업을 수행합니다:

1. Next.js가 환경 변수를 로드하는 것과 동일한 방식으로 환경 변수를 로드하여, `dotenv`와 같은 추가 의존성의 필요성을 제거합니다. `dotenv` 사용은 권장되지 않습니다. Next.js가 환경 변수를 다르게 로드하기 때문입니다. `payload run`을 사용하면 Payload와 Next.js 설정에서 일관된 환경 변수 처리를 보장합니다.
2. tsx를 초기화하여, tsx나 ts-node와 같은 도구를 수동으로 설치하지 않고도 TypeScript 파일을 직접 실행할 수 있습니다.### 문제 해결

가져오기 관련 오류가 발생하면, 2가지 옵션이 있습니다:

#### 옵션 1: `payload` 명령에 `--use-swc`를 추가하여 swc 모드 활성화:

예시:

```sh
payload run src/seed.ts --use-swc
```

참고: 먼저 프로젝트에 @swc-node/register를 설치하세요. swc 모드는 기본 tsx 모드보다 빠르지만, 일부 가져오기에서 문제가 발생할 수 있습니다.

#### 옵션 2: bun과 같은 대체 런타임 사용

대체 런타임에 대한 지원을 보장하지는 않지만, 자유롭게 사용할 수 있으며 `payload` 명령에 `--disable-transpile` 플래그를 추가하여 Payload의 자체 트랜스파일을 비활성화할 수 있습니다:

```sh
bunx --bun payload run src/seed.ts --disable-transpile
```

이것이 작동하려면 시스템에 bun이 설치되어 있어야 합니다.