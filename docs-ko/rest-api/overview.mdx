---
title: REST API
label: 개요
order: 10
desc: Payload는 컬렉션 및 글로벌 구성에서 완전한 기능을 갖춘 REST API를 생성합니다.
keywords: rest, api, documentation, Content Management System, cms, headless, javascript, node, react, nextjs
---

<Banner>
  완전한 기능을 갖춘 REST API가 컬렉션 및 글로벌 구성에서 자동으로 생성됩니다.
</Banner>

REST API는 RESTful 방식으로 문서와 상호 작용할 수 있는 완전한 기능을 갖춘 HTTP 클라이언트입니다. 모든 CRUD 작업을 지원하며 자동 페이지네이션, 깊이 및 정렬 기능을 갖추고 있습니다.
모든 Payload API 경로는 구성의 `routes.api` URL 세그먼트(기본값: `/api`)에 마운트되고 접두사가 붙습니다.

**REST 쿼리 매개변수:**

- [depth](../queries/depth) - 관계 및 업로드를 자동으로 채웁니다
- [locale](/docs/configuration/localization#retrieving-localized-docs) - 특정 로케일의 문서를 검색합니다
- [fallback-locale](/docs/configuration/localization#retrieving-localized-docs) - 로케일 값이 존재하지 않는 경우 대체 로케일을 지정합니다
- [select](../queries/select) - 결과에 포함할 필드를 지정합니다
- [populate](../queries/select#populate) - 채워진 문서에서 결과에 포함할 필드를 지정합니다
- [limit](../queries/pagination#pagination-controls) - 반환되는 문서 수를 제한합니다
- [page](../queries/pagination#pagination-controls) - 제한과 함께 사용할 때 문서를 가져올 페이지를 지정합니다
- [sort](../queries/sort#rest-api) - 반환되는 문서를 정렬하는 데 사용할 필드를 지정합니다
- [where](../queries/overview) - 문서를 쿼리하는 데 사용할 고급 필터를 지정합니다
- [joins](/docs/fields/join#rest-api) - 필드 이름별로 각 조인 필드에 대한 사용자 정의 요청을 지정합니다

## 컬렉션

각 컬렉션은 해당 `slug` 값을 사용하여 마운트됩니다. 예를 들어, 컬렉션의 slug가 `users`인 경우, 모든 해당 경로는 `/api/users`에 마운트됩니다.

참고: 컬렉션 slug는 kebab-case로 형식이 지정되어야 합니다

**모든 CRUD 작업은 다음과 같이 노출됩니다:**

<RestExamples
  data={[
    {
      operation: "찾기",
      method: "GET",
      path: "/api/{collection-slug}",
      description: "페이지네이션된 문서 찾기",
      example: {
        slug: "getCollection",
        req: true,
        res: {
          paginated: true,
          data: {
            id: "644a5c24cc1383022535fc7c",
            title: "Home",
            content: "REST API examples",
            slug: "home",
            createdAt: "2023-04-27T11:27:32.419Z",
            updatedAt: "2023-04-27T11:27:32.419Z",
          },
        },
        drawerContent: `
#### 추가적인 \`find\` 쿼리 매개변수

\`find\` 엔드포인트는 다음과 같은 추가 쿼리 매개변수를 지원합니다:

- [sort](/docs/queries/overview#sort) - 필드별 정렬
- [where](/docs/queries/overview) - where 쿼리를 전달하여 반환되는 문서를 제한
- [limit](/docs/queries/pagination#pagination-controls) - 반환되는 문서를 특정 수로 제한
- [page](/docs/queries/pagination#pagination-controls) - 문서의 특정 페이지 가져오기
  `
  },
  },
  {
  operation: "ID로 찾기",
  method: "GET",
  path: "/api/{collection-slug}/{id}",
  description: "ID로 특정 문서 찾기",
  example: {
  slug: "findByID",
  req: true,
  res: {
  id: "644a5c24cc1383022535fc7c",
  title: "Home",
  content: "REST API examples",
  slug: "home",
  createdAt: "2023-04-27T11:27:32.419Z",
  updatedAt: "2023-04-27T11:27:32.419Z",
  },
  },
  },
  {
  operation: "카운트",
  method: "GET",
  path: "/api/{collection-slug}/count",
  description: "문서 개수 세기",
  example: {
  slug: "count",
  req: true,
  res: {
  totalDocs: 10
  },
  },
  },
  {
  operation: "생성",
  method: "POST",
  path: "/api/{collection-slug}",
  description: "새 문서 생성",
  example: {
  slug: "createDocument",
  req: {
  credentials: true,
  headers: true,
  body: {
  title: "New page",
  content: "Here is some content",
  },
  },
  res: {
  message: "Page successfully created.",
  doc: {
  id: "644ba34c86359864f9535932",
  title: "New page",
  content: "Here is some content",
  slug: "new-page",
  createdAt: "2023-04-28T10:43:24.466Z",
  updatedAt: "2023-04-28T10:43:24.466Z",
  },
  },
  },
  },
  {
  operation: "업데이트",
  method: "PATCH",
  path: "/api/{collection-slug}",
  description: "where 쿼리와 일치하는 모든 문서 업데이트",
  example: {
  slug: "updateDocument",
  req: {
  credentials: true,
  query: true,
  headers: true,
  body: {
  title: "I have been updated!",
  },
  },
  res: {
  docs: [
  {
  id: "644ba34c86359864f9535932",
  title: "I have been updated!",
  content: "Here is some content",
  slug: "new-page",
  createdAt: "2023-04-28T10:43:24.466Z",
  updatedAt: "2023-04-28T10:45:23.724Z",
  },
  ],
  errors: [],
  },
  },
  },
  {
  operation: "ID로 업데이트",
  method: "PATCH",
  path: "/api/{collection-slug}/{id}",
  description: "ID로 문서 업데이트",
  example: {
  slug: "updateDocumentByID",
  req: {
  credentials: true,
  headers: true,
  body: {
  title: "I have been updated by ID!",
  categories: "example-uuid",
  tags: {
  relationTo: "location",
  value: "another-example-uuid",
  },
  },
  },
  res: {
  message: "Updated successfully.",
  doc: {
  id: "644a5c24cc1383022535fc7c",
  title: "I have been updated by ID!",
  content: "REST API examples",
  categories: {
  id: "example-uuid",
  name: "Test Category",
  },
  tags: [
  {
  relationTo: "location",
  value: {
  id: "another-example-uuid",
  name: "Test Location",
  },
  },
  ],
  slug: "home",
  createdAt: "2023-04-27T11:27:32.419Z",
  updatedAt: "2023-04-28T10:47:59.259Z",
  },
  },
  },
  },
  {
  operation: "삭제",
  method: "DELETE",
  path: "/api/{collection-slug}",
  description: "where 쿼리와 일치하는 모든 문서 삭제",
  example: {
  slug: "deleteDocuments",
  req: {
  credentials: true,
  query: true,
  headers: true,
  },
  res: {
  docs: [
  {
  id: "644ba4cf86359864f953594b",
  title: "New page",
  content: "Here is some content",
  slug: "new-page",
  createdAt: "2023-04-28T10:49:51.359Z",
  updatedAt: "2023-04-28T10:49:51.359Z",
  },
  ],
  errors: [],
  },
  },
  },
  {
  operation: "ID로 삭제",
  method: "DELETE",
  path: "/api/{collection-slug}/{id}",
  description: "ID로 기존 문서 삭제",
  example: {
  slug: "deleteByID",
  req: {
  credentials: true,
  headers: true,
  },
  res: {
  id: "644ba51786359864f9535954",
  title: "New page",
  content: "Here is some content",
  slug: "new-page",
  createdAt: "2023-04-28T10:51:03.028Z",
  updatedAt: "2023-04-28T10:51:03.028Z",
  },
  },
  },

]}
/>

## 인증 작업

인증이 활성화된 컬렉션에는 다음 엔드포인트도 제공됩니다:

<RestExamples
  data={[
    {
      operation: "로그인",
      method: "POST",
      path: "/api/{user-collection}/login",
      description: "이메일/비밀번호로 사용자 로그인",
      example: {
        slug: "login",
        req: {
          credentials: true,
          headers: true,
          body: {
            email: "dev@payloadcms.com",
            password: "password",
          },
        },
        res: {
          message: "Auth Passed",
          user: {
            id: "644b8453cd20c7857da5a9b0",
            email: "dev@payloadcms.com",
            _verified: true,
            createdAt: "2023-04-28T08:31:15.788Z",
            updatedAt: "2023-04-28T11:11:03.716Z",
          },
          token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9",
          exp: 1682689147,
        },
      },
    },
    {
      operation: "로그아웃",
      method: "POST",
      path: "/api/{user-collection}/logout",
      description: "사용자 로그아웃",
      example: {
        slug: "logout",
        req: {
          headers: true,
          credentials: true,
        },
        res: {
          message: "You have been logged out successfully.",
        },
      },
    },
    {
      operation: "잠금 해제",
      method: "POST",
      path: "/api/{user-collection}/unlock",
      description: "사용자 계정 잠금 해제",
      example: {
        slug: "unlockCollection",
        req: {
          credentials: true,
          headers: true,
          body: {
            email: "dev@payloadcms.com",
          },
        },
        res: {
          message: "Success",
        },
      },
    },
    {
      operation: "새로 고침",
      method: "POST",
      path: "/api/{user-collection}/refresh-token",
      description: "아직 만료되지 않은 토큰 새로 고침",
      example: {
        slug: "refreshToken",
        req: {
          credentials: true,
          headers: true,
        },
        res: {
          message: "Token refresh successful",
          refreshedToken: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9",
          exp: 1682689362,
          user: {
            email: "dev@payloadcms.com",
            id: "644b8453cd20c7857da5a9b0",
            collection: "users",
          },
        },
      },
    },
    {
      operation: "사용자 인증",
      method: "POST",
      path: "/api/{user-collection}/verify/{token}",
      description: "사용자 인증",
      example: {
        slug: "verifyUser",
        req: {
          credentials: true,
          headers: true,
        },
        res: {
          message: "Email verified successfully.",
        },
      },
    },
    {
      operation: "현재 사용자",
      method: "GET",
      path: "/api/{user-collection}/me",
      description: "토큰과 함께 현재 로그인한 사용자 반환",
      example: {
        slug: "currentUser",
        req: {
          credentials: true,
          headers: true,
        },
        res: {
          user: {
            id: "644b8453cd20c7857da5a9b0",
            email: "dev@payloadcms.com",
            _verified: true,
            createdAt: "2023-04-28T08:31:15.788Z",
            updatedAt: "2023-04-28T11:45:23.926Z",
            _strategy: "local-jwt",
          },
          collection: "users",
          token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9",
          exp: 1682689523,
        },
      },
    },
    {
      operation: "비밀번호 찾기",
      method: "POST",
      path: "/api/{user-collection}/forgot-password",
      description: "비밀번호 재설정 워크플로 진입점",
      example: {
        slug: "forgotPassword",
        req: {
          headers: true,
          credentials: true,
          body: {
            email: "dev@payloadcms.com",
          },
        },
        res: {
          message: "Success",
        },
      },
    },
    {
      operation: "비밀번호 재설정",
      method: "POST",
      path: "/api/{user-collection}/reset-password",
      description: "사용자 비밀번호 재설정",
      example: {
        slug: "resetPassword",
        req: {
          credentials: true,
          headers: true,
          body: {
            token: "7eac3830ffcfc7f9f66c00315dabeb11575dba91",
            password: "newPassword",
          },
        },
        res: {
          message: "Password reset successfully.",
          token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9",
          user: {
            id: "644baa473ea9538765cc30fc",
            email: "dev@payloadcms.com",
            _verified: true,
            createdAt: "2023-04-28T11:13:11.569Z",
            updatedAt: "2023-04-28T11:49:23.860Z",
          },
        },
      },
    },

]}
/>

## 글로벌

글로벌은 생성하거나 삭제할 수 없으므로 두 개의 REST 엔드포인트만 열립니다:

<RestExamples
  data={[
    {
      operation: '글로벌 가져오기',
      method: 'GET',
      path: '/api/globals/{global-slug}',
      description: 'slug로 글로벌 가져오기',
      example: {
        slug: 'getGlobal',
        req: {
          credentials: true,
          headers: true,
        },
        res: {
          announcement: 'Here is an announcement!',
          globalType: 'announcement',
          createdAt: '2023-04-28T08:53:56.066Z',
          updatedAt: '2023-04-28T08:53:56.066Z',
          id: '644b89a496c64a833fe579c9',
        },
      },
    },
    {
      operation: '글로벌 업데이트',
      method: 'POST',
      path: '/api/globals/{global-slug}',
      description: 'slug로 글로벌 업데이트',
      example: {
        slug: 'updateGlobal',
        req: {
          headers: true,
          credentials: true,
          body: {
            announcement: 'Paging Doctor Scrunt',
          },
        },
        res: {
          announcement: 'Paging Doctor Scrunt',
          globalType: 'announcement',
          createdAt: '2023-04-28T08:53:56.066Z',
          updatedAt: '2023-04-28T08:53:56.066Z',
          id: '644b89a496c64a833fe579c9',
        },
      },
    },
  ]}
/>

## 환경설정

위에서 동적으로 생성된 엔드포인트 외에도 Payload에는 인증된 사용자와 관련된 데이터에 대한 관리자 사용자 [환경설정](/docs/admin/preferences)을 관리하는 REST 엔드포인트가 있습니다.

<RestExamples
  data={[
    {
      operation: '환경설정 가져오기',
      method: 'GET',
      path: '/api/payload-preferences/{key}',
      description: '키로 환경설정 가져오기',
      example: {
        slug: 'getPreference',
        req: {
          headers: true,
          credentials: true,
        },
        res: {
          _id: '644bb7a8307b3d363c6edf2c',
          key: 'region',
          user: '644b8453cd20c7857da5a9b0',
          userCollection: 'users',
          __v: 0,
          createdAt: '2023-04-28T12:10:16.689Z',
          updatedAt: '2023-04-28T12:10:16.689Z',
          value: 'Europe/London',
        },
      },
    },
    {
      operation: '환경설정 생성',
      method: 'POST',
      path: '/api/payload-preferences/{key}',
      description: '키로 환경설정 생성 또는 업데이트',
      example: {
        slug: 'createPreference',
        req: {
          headers: true,
          credentials: true,
          body: {
            value: 'Europe/London',
          },
        },
        res: {
          message: 'Updated successfully.',
          doc: {
            user: '644b8453cd20c7857da5a9b0',
            key: 'region',
            userCollection: 'users',
            value: 'Europe/London',
          },
        },
      },
    },
    {
      operation: '환경설정 삭제',
      method: 'DELETE',
      path: '/api/payload-preferences/{key}',
      description: '키로 환경설정 삭제',
      example: {
        slug: 'deletePreference',
        req: {
          headers: true,
        },
        res: {
          message: 'deletedSuccessfully',
        },
      },
    },
  ]}
/>

## 사용자 정의 엔드포인트

추가 REST API 엔드포인트는 Payload Config 내의 다양한 위치에 `endpoints` 배열을 제공하여 애플리케이션에 추가할 수 있습니다. 사용자 정의 엔드포인트는 기존 경로에 추가 미들웨어를 추가하거나 Payload 앱과 플러그인에 사용자 정의 기능을 구축하는 데 유용합니다. 엔드포인트는 Payload Config의 상단, `collections` 및 `globals`에 추가할 수 있으며 구성한 api 및 slug에 따라 액세스할 수 있습니다.

<Banner type="warning">
  사용자 정의 엔드포인트는 기본적으로 인증되지 않습니다. 자신의 엔드포인트를
  보호할 책임이 있습니다.
</Banner>

각 엔드포인트 객체에는 다음이 필요합니다:

| 속성          | 설명                                                                                                                                                                                                                                                       |
| ------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **`path`**    | 컬렉션 또는 글로벌 slug 다음의 엔드포인트 경로에 대한 문자열                                                                                                                                                                                               |
| **`method`**  | 사용할 소문자 HTTP 동사: 'get', 'head', 'post', 'put', 'delete', 'connect' 또는 'options'                                                                                                                                                                 |
| **`handler`** | **req**를 받는 함수 - [Web Request](https://developer.mozilla.org/en-US/docs/Web/API/Request) 속성, 현재 인증된 `user` 및 Local API 인스턴스 `payload`를 포함하는 `PayloadRequest` 객체.                                                                |
| **`root`**    | `true`인 경우, Payload 핸들러와 `routes.api` 하위 경로를 우회하여 루트 Next.js 앱에서 엔드포인트를 정의합니다. 참고: 이는 Payload Config의 최상위 엔드포인트에만 적용되며, `collections` 또는 `globals`에 정의된 엔드포인트는 루트가 될 수 없습니다. |
| **`custom`**  | 사용자 정의 데이터 추가를 위한 확장 지점(예: 플러그인용)                                                                                                                                                                                                  |

예시:

```ts
import type { CollectionConfig } from 'payload'

// 추가 추적 세부정보 경로가 있는 'orders' 컬렉션, /api/orders/:id/tracking에서 접근 가능
export const Orders: CollectionConfig = {
  slug: 'orders',
  fields: [
    /* ... */
  ],
  // highlight-start
  endpoints: [
    {
      path: '/:id/tracking',
      method: 'get',
      handler: async (req) => {
        const tracking = await getTrackingInfo(req.routeParams.id)

        if (!tracking) {
          return Response.json({ error: 'not found' }, { status: 404 })
        }

        return Response.json({
          message: `Hello ${req.routeParams.name as string} @ ${req.routeParams.group as string}`,
        })
      },
    },
    {
      path: '/:id/tracking',
      method: 'post',
      handler: async (req) => {
        // `data`는 요청에 자동으로 추가되지 않습니다
        // 요청의 본문을 읽으려면
        // `data = await req.json()`을 사용할 수 있습니다
        const data = await req.json()
        await req.payload.update({
          collection: 'tracking',
          data: {
            // 문서를 업데이트할 데이터
          },
        })
        return Response.json({
          message: 'successfully updated tracking info',
        })
      },
    },
    {
      path: '/:id/forbidden',
      method: 'post',
      handler: async (req) => {
        // 이것은 인증된 엔드포인트의 예입니다
        if (!req.user) {
          return Response.json({ error: 'forbidden' }, { status: 403 })
        }

        // 무언가 수행

        return Response.json({
          message: 'successfully updated tracking info',
        })
      },
    },
  ],
  // highlight-end
}
```

<Banner>
  **참고:** **req**는 **payload** 객체를 가지며 [접근 제어](../access-control/overview) 및
  [훅](../hooks/overview)을 사용하는 req.payload.find()와 같은 호출을
  만들기 위해 엔드포인트 핸들러 내에서 사용할 수 있습니다.
</Banner>

#### 유용한 팁

`req.data`

데이터는 요청에 자동으로 추가되지 않습니다. `await req.json()`을 호출하여 본문 데이터를 읽을 수 있습니다.

또는 요청을 변경하고 발견되면 데이터와 파일을 추가하는 헬퍼 함수를 사용할 수 있습니다.

```ts
import { addDataAndFileToRequest } from 'payload'

// 사용자 정의 엔드포인트 예시
{
  path: '/:id/tracking',
  method: 'post',
  handler: async (req) => {
    await addDataAndFileToRequest(req)
    await req.payload.update({
      collection: 'tracking',
      data: {
        // 문서를 업데이트할 데이터
      }
    })
    return Response.json({
      message: 'successfully updated tracking info'
    })
  }
}
```

`req.locale` & `req.fallbackLocale`

로케일과 대체 로케일은 사용자 정의 엔드포인트 요청에 자동으로 추가되지 않습니다. 이를 추가하려면 이 헬퍼 함수를 사용할 수 있습니다.

```ts
import { addLocalesToRequestFromData } from 'payload'

// 사용자 정의 엔드포인트 예시
{
  path: '/:id/tracking',
  method: 'post',
  handler: async (req) => {
    await addLocalesToRequestFromData(req)
    // 이제 req.locale 및 req.fallbackLocale에 액세스할 수 있습니다
    return Response.json({ message: 'success' })
  }
}
```

`headersWithCors`

기본적으로 사용자 정의 엔드포인트는 응답에서 CORS 헤더를 처리하지 않습니다. `headersWithCors` 함수는 Payload 구성을 확인하고 이에 따라 응답에서 적절한 CORS 헤더를 설정합니다.

```ts
import { headersWithCors } from 'payload'

// 사용자 정의 엔드포인트 예시
{
  path: '/:id/tracking',
  method: 'post',
  handler: async (req) => {
    return Response.json(
      { message: 'success' },
      {
        headers: headersWithCors({
          headers: new Headers(),
          req,
        })
      },
    )
  }
}
```

## GET 요청에 대한 메서드 재정의

Payload는 HTTP POST 메서드를 사용하여 GET 요청을 보낼 수 있는 메서드 재정의 기능을 지원합니다. 이는 일반적인 GET 요청의 쿼리 문자열이 너무 긴 시나리오에서 특히 유용할 수 있습니다.

### 사용 방법

이 기능을 사용하려면 POST 요청에 `X-Payload-HTTP-Method-Override` 헤더를 `GET`으로 설정하여 포함하세요. 매개변수는 `Content-Type`을 `application/x-www-form-urlencoded`로 설정하여 요청 본문에 보내야 합니다.

### 예시

다음은 메서드 재정의를 사용하여 GET 요청을 수행하는 방법의 예입니다:

#### 메서드 재정의 사용 (POST)

```ts
const res = await fetch(`${api}/${collectionSlug}`, {
  method: 'POST',
  credentials: 'include',
  headers: {
    'Accept-Language': i18n.language,
    'Content-Type': 'application/x-www-form-urlencoded',
    'X-Payload-HTTP-Method-Override': 'GET',
  },
  body: qs.stringify({
    depth: 1,
    locale: 'en',
  }),
})
```

#### 동등한 일반 GET 요청

```ts
const res = await fetch(`${api}/${collectionSlug}?depth=1&locale=en`, {
  method: 'GET',
  credentials: 'include',
  headers: {
    'Accept-Language': i18n.language,
  },
})
```