---
title: 환경 변수
label: 환경 변수
order: 60
desc: Payload 프로젝트에서 환경 변수를 사용하는 방법을 알아보세요
---

환경 변수는 애플리케이션이 기능하는 데 필요한 민감한 정보를 저장하는 방법입니다. API 키부터 [데이터베이스](../database/overview) 자격 증명까지 무엇이든 될 수 있습니다. Payload를 사용하면 구성 내에서와 애플리케이션 전체에서 환경 변수를 쉽게 사용할 수 있습니다.

## Next.js 애플리케이션

Next.js를 사용하는 경우 `.env` 파일을 생성하는 것 외에는 추가 설정이 필요하지 않습니다.

환경 변수를 사용하려면 프로젝트 루트에 `.env` 파일을 추가하세요:

```plaintext
project-name/
├─ .env
├─ package.json
├─ payload.config.ts
```

다음은 `.env` 파일의 예입니다:

```plaintext
SERVER_URL=localhost:3000
DATABASE_URI=mongodb://localhost:27017/my-database
```

Payload 구성에서 환경 변수를 사용하려면 `process.env`에서 직접 접근할 수 있습니다:
```ts
import { buildConfig } from 'payload'

export default buildConfig({
  serverURL: process.env.SERVER_URL, // highlight-line
  // ...
})
```

## 클라이언트 측 환경

보안 및 안전상의 이유로 [관리자 패널](../admin/overview)은 기본적으로 _클라이언트 측_ 번들에 환경 변수를 포함하지 **않습니다**. 하지만 Next.js는 필요할 때 환경 변수를 클라이언트 측 번들에 노출하는 메커니즘을 제공합니다.

[커스텀 컴포넌트](../custom-components/overview)를 빌드하고 클라이언트 측에서 환경 변수에 접근해야 하는 경우, `NEXT_PUBLIC_` 접두사를 붙여서 할 수 있습니다.

<Banner type="warning">
  **중요:** 클라이언트 측 코드에 제공하는 변수에 대해 주의하세요. 실수로
  민감한 정보가 유출되지 않는지 확인하기 위해 모든 변수를 분석하세요.
  일반인이 일반 텍스트로 읽어도 안전한 키만 포함하세요.
</Banner>

예를 들어, 다음 환경 변수가 있는 경우:

```bash
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_XXXXXXXXXXXXXXXXXX
```

이 키는 클라이언트 측 Payload 번들에서 자동으로 사용할 수 있게 되며 커스텀 컴포넌트에서 다음과 같이 참조할 수 있습니다:

```tsx
'use client'
import React from 'react'

const stripeKey = process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY // highlight-line

const MyClientComponent = () => {
  // 키로 무언가를 수행

  return <div>My Client Component</div>
}
```

자세한 정보는 [Next.js 문서](https://nextjs.org/docs/app/building-your-application/configuring/environment-variables)를 확인하세요.

## Next.js 외부

Next.js 외부에서 Payload를 사용하는 경우, `.env` 파일에서 환경 변수를 처리하기 위해 [`dotenv`](https://www.npmjs.com/package/dotenv) 패키지를 사용하는 것을 제안합니다. 이는 환경 변수를 `process.env`에 자동으로 로드합니다.

이를 위해 애플리케이션에서 가능한 한 높은 곳에서 패키지를 가져오세요:

```ts
import dotenv from 'dotenv'
dotenv.config() // highlight-line

import { buildConfig } from 'payload'

export default buildConfig({
  serverURL: process.env.SERVER_URL,
  // ...
})
```

<Banner type="warning">
  **팁:** `dotenv`가 `.env` 파일을 찾을 수 있는지 확인하세요. 기본적으로
  프로젝트 루트에서 `.env`라는 이름의 파일을 찾습니다. 다른 파일을
  지정해야 하는 경우 구성 옵션에 경로를 전달하세요.
</Banner>