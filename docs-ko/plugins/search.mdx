---
title: 검색 플러그인
label: 검색
order: 80
desc: 매우 빠르게 검색할 수 있는 문서 레코드를 생성합니다.
keywords: 플러그인, 검색, 검색 플러그인, 검색 엔진, 검색 인덱스, 검색 결과, 검색 바, 검색 박스, 검색 필드, 검색 폼, 검색 입력
---

![https://www.npmjs.com/package/@payloadcms/plugin-search](https://img.shields.io/npm/v/@payloadcms/plugin-search)

이 플러그인은 매우 빠르게 검색할 수 있는 문서 레코드를 생성합니다. 데이터베이스에 인덱싱된 새로운 `search` 컬렉션을 생성한 다음 검색에 중요한 데이터만 사용하여 각 문서의 정적 복사본을 저장하는 방식으로 작동합니다. 애플리케이션의 문서를 관리할 때 검색 레코드는 백그라운드에서 자동으로 생성, 동기화 및 삭제됩니다.

예를 들어, 매우 크고 복잡한 게시글 컬렉션이 있는 경우 각 게시글의 제목, 발췌문 및 슬러그만 동기화하여 원래 게시글에 직접 쿼리하는 대신 _그것_에 쿼리할 수 있습니다. 검색 레코드는 정적이므로 쿼리할 때 원래 문서에 있을 수 있는 훅을 우회하는 중요한 이점도 있습니다. 동기화할 데이터를 정확히 정의할 수 있으며 문서별로 이 데이터를 수정하거나 대체할 수도 있습니다.

검색 결과를 쿼리하려면 이미 익숙한 기존 Payload API를 모두 사용하세요. 각 컬렉션에 대해 커스텀 우선순위를 설정하여 검색 결과의 우선순위를 정할 수도 있습니다. 예를 들어, 페이지보다 블로그 게시글을 먼저 나열하고 싶을 수 있습니다. 또는 특정 게시글이 항상 첫 번째로 나타나도록 하고 싶을 수도 있습니다. 검색 레코드에는 쿼리에서 `?sort=` 매개변수로 사용할 수 있는 `priority` 필드가 제공됩니다.

이 플러그인은 프론트엔드 애플리케이션의 검색 바와 같은 빠르고 몰입감 있는 검색 경험을 구현하는 훌륭한 방법입니다. 많은 애플리케이션에서 Algolia나 ElasticSearch와 같은 타사 서비스의 파워와 복잡성이 필요하지 않을 수 있습니다. 이 플러그인은 설정하기 쉽고 자체 데이터베이스에서 완전히 실행되는 퍼스트 파티 대안을 제공합니다.

<Banner type="info">
  이 플러그인은 완전히 오픈소스이며 [소스 코드는
  여기에서](https://github.com/payloadcms/payload/tree/main/packages/plugin-search)
  찾을 수 있습니다. 도움이 필요하시면 [커뮤니티
  도움말](https://payloadcms.com/community-help)을 확인하세요. 버그를 발견했다고 생각되면
  가능한 한 자세한 내용과 함께 [새 이슈를
  열어주세요](https://github.com/payloadcms/payload/issues/new?assignees=&labels=plugin%3A%20search&template=bug_report.md&title=plugin-search%3A).
</Banner>

## 핵심 기능

- 데이터베이스에 인덱싱된 `search` 컬렉션을 자동으로 추가
- 문서를 관리할 때 검색 레코드를 자동으로 생성, 동기화 및 삭제
- 정의한 검색에 중요한 데이터만 저장 (예: 제목, 발췌문 등)
- 퍼스트 파티 Payload API를 사용하여 검색 결과 쿼리 허용
- 기본 훅을 트리거하지 않고 문서 쿼리 허용
- 컬렉션이나 문서별로 검색 결과의 우선순위를 쉽게 설정 허용
- 요청에 따라 컬렉션별로 검색 결과를 재인덱싱 허용

## 설치

[pnpm](https://pnpm.io), [npm](https://npmjs.com), [Yarn](https://yarnpkg.com)과 같은 JavaScript 패키지 관리자를 사용하여 플러그인을 설치하세요:

```bash
  pnpm add @payloadcms/plugin-search
```

## 기본 사용법

[Payload Config](https://payloadcms.com/docs/configuration/overview)의 `plugins` 배열에서 [옵션](#options)과 함께 플러그인을 호출하세요:

```js
import { buildConfig } from 'payload'
import { searchPlugin } from '@payloadcms/plugin-search'

const config = buildConfig({
  collections: [
    {
      slug: 'pages',
      fields: [],
    },
    {
      slug: 'posts',
      fields: [],
    },
  ],
  plugins: [
    searchPlugin({
      collections: ['pages', 'posts'],
      defaultPriorities: {
        pages: 10,
        posts: 20,
      },
    }),
  ],
})

export default config
```

### 옵션

#### `collections`

`collections` 속성은 검색에 동기화를 활성화할 컬렉션 슬러그의 배열입니다. 활성화된 컬렉션은 시간이 지나면서 변경될 때 해당 검색 레코드를 생성, 업데이트 및 삭제하는 `beforeChange` 및 `afterDelete` 훅을 받습니다.

#### `localize`

기본적으로 검색 플러그인은 현지화가 활성화된 경우 새로 추가된 `search` 컬렉션의 `title` 필드에 `localization: true`를 추가합니다. 이 동작을 비활성화하려면 `false`로 설정할 수 있습니다.

#### `defaultPriorities`

이 플러그인은 쿼리에서 `?sort=` 매개변수로 사용할 수 있는 `priority` 필드를 `search` 컬렉션에 자동으로 추가합니다. 예를 들어, 페이지보다 블로그 게시글을 먼저 나열하고 싶을 수 있습니다. 또는 특정 게시글이 항상 첫 번째로 나타나도록 하고 싶을 수도 있습니다.

`defaultPriorities` 속성은 `create` 작업 중에 검색 레코드에 대한 대체 `priority`를 설정하는 데 사용됩니다. 키가 컬렉션 슬러그이고 값이 숫자이거나 숫자를 반환하는 함수인 객체를 허용합니다. 함수는 생성되는 문서인 `doc`를 인수로 받습니다.

```ts
// payload.config.ts
{
  // ...
  searchPlugin({
    defaultPriorities: {
      pages: ({ doc }) => (doc.title.startsWith('Hello, world!') ? 1 : 10),
      posts: 20,
    },
  }),
}
```

#### `searchOverrides`

이 플러그인은 `search` 컬렉션을 자동으로 생성하지만 `searchOverrides` 속성을 통해 이 컬렉션의 모든 것을 재정의할 수 있습니다. [Payload 컬렉션 Config](https://payloadcms.com/docs/configuration/collections)의 모든 것을 허용하고 플러그인에서 제공하는 기본 `search` 컬렉션 구성과 병합합니다.

`fields` 속성은 `defaultFields` 키가 있는 객체를 받는 함수입니다. 이는 `search` 컬렉션에 자동으로 추가되는 필드 배열입니다. 이 배열을 수정하거나 새 필드를 추가할 수 있습니다.

```ts
// payload.config.ts
{
  // ...
  searchPlugin({
    searchOverrides: {
      slug: 'search-results',
      fields: ({ defaultFields }) => [
        ...defaultFields,
        {
          name: 'excerpt',
          type: 'textarea',
          admin: {
            position: 'sidebar',
          },
        },
      ],
    },
  }),
}
```

#### `beforeSync`

검색 레코드를 생성하거나 업데이트하기 전에 `beforeSync` 함수가 실행됩니다. 이는 검색 레코드가 생성되거나 업데이트되기 전에 데이터를 수정하거나 대체값을 제공할 수 있는 [afterChange](https://payloadcms.com/docs/hooks/globals#afterchange) 훅입니다.

```ts
// payload.config.ts
{
  // ...
  searchPlugin({
    beforeSync: ({ originalDoc, searchDoc }) => ({
      ...searchDoc,
      // - 여기에서 문서를 어떤 방식으로든 수정할 수 있습니다. 이는 비동기일 수 있습니다
      // - `searchOverrides` 구성에서 `excerpt` 필드도 추가해야 합니다
      excerpt: originalDoc?.excerpt || 'This is a fallback excerpt',
    }),
  }),
}
```

#### `syncDrafts`

`syncDrafts`가 true이면 초안 문서가 검색에 동기화됩니다. 기본값은 false입니다. 이를 적용하려면 [Payload 초안](https://payloadcms.com/docs/versions/drafts)이 활성화되어 있어야 합니다.

#### `deleteDrafts`

true이면 상태가 초안으로 변경된 문서를 검색에서 삭제합니다. 기본값은 true입니다. 이를 적용하려면 [Payload 초안](https://payloadcms.com/docs/versions/drafts)이 활성화되어 있어야 합니다.

#### `reindexBatchSize`

지정되면 각 배치에서 한 번에 재인덱싱할 검색 문서 수를 결정하는 값으로 사용될 숫자입니다. 설정되지 않으면 기본값은 `50`입니다.

### 컬렉션 재인덱싱

컬렉션 재인덱싱을 사용하면 요청에 따라 검색 활성화 컬렉션에서 검색 문서를 다시 만들 수 있습니다. 이는 일반적으로 기존 프로젝트에 `plugin-search`를 추가할 때 검색 인덱스가 아직 없는 기존 문서가 있는 경우에 유용합니다. 시작하려면 검색 컬렉션으로 이동하여 목록 보기의 오른쪽 상단 작업 슬롯에 있는 `Reindex`라고 표시된 버튼을 클릭하세요. 그러면 재인덱싱할 검색 활성화 컬렉션 중 하나 또는 모든 컬렉션을 선택할 수 있는 옵션이 있는 팝업이 열립니다.

## TypeScript

모든 타입은 직접 가져올 수 있습니다:

```ts
import type { SearchConfig, BeforeSync } from '@payloadcms/plugin-search/types'
```