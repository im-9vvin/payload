---
title: 자동 저장
label: 자동 저장
order: 30
desc: Payload의 Draft 기능을 사용하여 컬렉션과 글로벌을 구성하여 변경 사항을 드래프트로 자동 저장하고, 준비가 되었을 때만 게시할 수 있습니다.
keywords: version history, revisions, audit log, draft, publish, autosave, Content Management System, cms, headless, javascript, node, react, nextjs
---

Payload의 [Draft](/docs/versions/drafts) 기능을 확장하여, 컬렉션과 글로벌을 구성하여 변경 사항을 드래프트로 자동 저장하고, 준비가 되었을 때만 게시할 수 있습니다. 관리 UI는 정의하는 간격으로 자동 저장 진행 상황에 자동으로 적응하고, 모든 자동 저장 변경 사항을 새로운 Draft 버전으로 저장합니다. 작업을 절대 잃어버리지 말고 - 준비가 되었을 때만 라이브 문서에 변경 사항을 게시하세요.

<Banner type="warning">
  자동 저장이 작동하려면 버전과 드래프트가 활성화되어 있어야 합니다.
</Banner>

![자동 저장 활성화](/images/docs/autosave-enabled.png)
_자동 저장이 활성화된 경우, 문서가 수정되면 드래프트가 자동으로 생성되고 관리 UI는 사이드바의 오른쪽 상단에 문서가 마지막으로 저장된 시점을 설명하는 표시기를 추가합니다._

## 옵션

컬렉션과 글로벌 모두 자동 저장 구성을 위한 동일한 옵션을 지원합니다. `versions.drafts.autosave`를 `true`로 설정하거나 객체를 전달하여 자동 저장 속성을 구성할 수 있습니다.

| 드래프트 자동 저장 옵션 | 설명                                                                                                                                                           |
| ----------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `interval`              | 문서를 편집하는 동안 자동으로 진행 상황을 저장할 밀리초 단위의 `interval`을 정의합니다. 문서 업데이트는 이 간격으로 "디바운스"됩니다. 기본값은 `800`입니다. |
| `showSaveDraftButton`   | 자동 저장이 활성화되어 있는 동안에도 "드래프트로 저장" 버튼을 표시하려면 `true`로 설정하세요. 기본값은 `false`입니다.                                                            |

**버전, 드래프트 및 자동 저장이 활성화된 예제 설정:**

```ts
import type { CollectionConfig } from 'payload'

export const Pages: CollectionConfig = {
  slug: 'pages',
  access: {
    read: ({ req }) => {
      // 로그인한 사용자가 있으면
      // 모든 문서를 검색할 수 있게 허용
      if (req.user) return true

      // 사용자가 없으면
      // 반환되는 문서를 제한하여
      // `_status`가 `published`와 같은 문서만 포함
      return {
        _status: {
          equals: 'published',
        },
      }
    },
  },
  versions: {
    drafts: {
      autosave: true,

      // 또는 객체를 지정하여 자동 저장을 커스터마이즈할 수 있습니다:
      // autosave: {
      // 문서가 자동 저장되는 빈도를 정의(밀리초 단위)
      //   interval: 1500,
      //
      // 자동 저장이 활성화되어 있는 동안에도 "드래프트로 저장" 버튼 표시
      //   showSaveDraftButton: true,
      // },
    },
  },
  //.. 여기에 Pages 설정의 나머지 부분
}
```

## 자동 저장 API

`autosave`가 활성화되면 Payload 내의 모든 `update` 작업은 `autosave`라는 새로운 인수를 노출합니다. `true`로 설정하면 Payload는 들어오는 드래프트 업데이트를 `autosave`로 처리합니다. 이는 주로 관리 UI에서 사용되지만, 사용자를 위한 앱을 구축하고 자체 앱에서 `autosave`를 구현하고 싶은 경우가 있을 수 있습니다. 이렇게 하려면 `update` 작업에서 `autosave` 인수를 사용하세요.

### 자동 저장이 저장되는 방법

각 자동 저장에 대해 새 버전을 만든다면 데이터베이스 내의 `_versions` 컬렉션을 어지럽히는 수많은 자동 저장을 빠르게 찾게 될 것입니다. `autosave`는 일반적으로 ~800ms 간격으로 문서를 저장하도록 설정되기 때문에 빠르게 지저분해질 것입니다.

<Banner type="success">
  문서가 자동 저장될 때마다 새 버전을 만드는 대신 Payload는
  **하나의** 자동 저장 버전만 생성하고 수행된 각 자동 저장으로
  해당 특정 버전을 업데이트합니다. 이렇게 하면 버전이
  깔끔하고 정리된 상태로 유지됩니다.
</Banner>