---
title: 문서 잠금
label: 문서 잠금
order: 40
desc: 편집 중 문서가 잠기도록 하여 여러 사용자의 동시 변경을 방지하고 데이터 무결성을 유지하세요.
keywords: 잠금, 문서 잠금, 편집 잠금, 문서, 동시성, Payload, 헤드리스, 콘텐츠 관리 시스템, cms, javascript, react, node, nextjs
---

Payload의 문서 잠금은 한 번에 한 사용자만 문서를 편집할 수 있도록 하여 데이터 충돌과 실수로 인한 덮어쓰기를 방지합니다. 문서가 잠겨 있으면 다른 사용자는 잠금이 해제될 때까지 변경을 할 수 없어 협업 환경에서 데이터 무결성을 보장합니다.

잠금은 사용자가 관리자 패널 내에서 문서 편집을 시작할 때 자동으로 트리거되며, 사용자가 편집 뷰에서 나가거나 비활성으로 인해 잠금이 만료될 때까지 유지됩니다.

## 작동 방식

사용자가 문서 편집을 시작하면 Payload가 해당 사용자에 대해 잠금을 설정합니다. 다른 사용자가 동일한 문서에 액세스하려고 시도하면 현재 편집 중임을 알리는 알림을 받게 됩니다. 그러면 다음 옵션 중 하나를 선택할 수 있습니다:

- 읽기 전용으로 보기: 변경할 수 없는 상태로 문서를 봅니다.
- 인수: 현재 사용자로부터 편집을 인수하여 새 편집자에게 문서를 잠그고 원래 사용자에게 알립니다.
- 대시보드로 돌아가기: 잠긴 문서에서 벗어나 다른 작업을 계속합니다.

잠금은 `lockDocuments` 구성의 `duration` 속성을 사용하여 구성 가능한 일정 기간의 비활성 후 자동으로 만료되며, 그 후 다른 사용자가 편집을 재개할 수 있습니다.

<Banner type="info">
  **참고:** 애플리케이션에 문서 잠금이 필요하지 않은 경우 `lockDocuments`
  속성을 `false`로 설정하여 모든 컬렉션 또는 글로벌에 대해 이 기능을
  비활성화할 수 있습니다.
</Banner>

### 구성 옵션

`lockDocuments` 속성은 컬렉션 구성과 글로벌 구성 모두에 존재합니다. 문서 잠금은 기본적으로 활성화되어 있지만 잠금 지속 시간을 커스터마이징하거나 모든 컬렉션 또는 글로벌에 대해 기능을 끌 수 있습니다.

다음은 문서 잠금에 대한 구성 예제입니다:

```ts
import type { CollectionConfig } from 'payload'

export const Posts: CollectionConfig = {
  slug: 'posts',
  fields: [
    {
      name: 'title',
      type: 'text',
    },
    // 기타 필드...
  ],
  lockDocuments: {
    duration: 600, // 초 단위 지속 시간
  },
}
```

#### 잠금 옵션

| 옵션                | 설명                                                                                                                                                   |
| ------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **`lockDocuments`** | 컬렉션 또는 글로벌에 대한 문서 잠금을 활성화하거나 비활성화합니다. 기본적으로 문서 잠금이 활성화되어 있습니다. 구성할 객체로 설정하거나 잠금을 비활성화하려면 false로 설정합니다. |
| **`duration`**      | 사용자 상호 작용 없이 문서가 잠긴 상태로 유지되는 지속 시간(초)을 지정합니다. 기본값은 300초(5분)입니다.                                               |

### API에 미치는 영향

문서 잠금은 Local API와 REST API 모두에 영향을 미쳐 문서가 잠겨 있으면 동시 사용자가 해당 문서(글로벌 포함)에 대한 업데이트나 삭제를 수행할 수 없도록 합니다. 사용자가 잠긴 문서를 업데이트하거나 삭제하려고 시도하면 오류를 받게 됩니다.

문서가 잠금 해제되거나 잠금 지속 시간이 만료되면 다른 사용자가 정상적으로 업데이트나 삭제를 진행할 수 있습니다.

#### 잠금 재정의

`update` 및 `delete`와 같은 작업에 대해 Payload는 `overrideLock` 옵션을 포함합니다. 이 boolean 플래그는 `false`로 설정될 때 문서 잠금을 강제하여 다른 사용자가 현재 잠금을 보유하고 있으면 작업이 진행되지 않도록 합니다.

기본적으로 `overrideLock`은 `true`로 설정되어 있어 문서 잠금이 무시되고 문서가 잠겨 있어도 작업이 진행됩니다. 잠금을 강제하고 잠긴 문서의 업데이트나 삭제를 방지하려면 `overrideLock: false`를 설정하세요.

```ts
const result = await payload.update({
  collection: 'posts',
  id: '123',
  data: {
    title: 'New title',
  },
  overrideLock: false, // 문서 잠금을 강제하여 문서가 잠겨 있으면 업데이트를 방지
})
```

이 옵션은 관리자 권한이나 특정 워크플로우에서 잠금을 재정의하고 작업이 완료되도록 보장해야 하는 시나리오에서 특히 유용합니다.